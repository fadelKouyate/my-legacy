(this["webpackJsonpmy-legacy"]=this["webpackJsonpmy-legacy"]||[]).push([[20],{567:function(e,t,a){"use strict";var r=a(557),n=a.n(r),l=a(558),c=a(167),i=a(168),o=a(574),s=a(579),u=a.n(s),p=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"createTrip",value:function(e){var t=o.a+o.j,a=JSON.stringify(e),r=JSON.parse(a);return u.a.post(t,r).then((function(e){return e})).catch((function(e){throw console.log("Error lors de la creation du trajet"),e}))}},{key:"updateTrip",value:function(e){var t=o.a+o.r,a=JSON.stringify(e),r=JSON.parse(a);return u.a.post(t,r).then((function(e){return e})).catch((function(e){throw console.log("Error lors de la modification du trajet"),e}))}},{key:"bookTrip",value:function(e){var t=o.a+o.c,a=JSON.stringify(e),r=JSON.parse(a);return u.a.post(t,r).then((function(e){return e})).catch((function(e){throw console.log("Error lors de la reservation du trajet"),e}))}},{key:"bookingValidation",value:function(){var e=Object(l.a)(n.a.mark((function e(t){var a,r,l,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.a+o.b,r=JSON.stringify(t),l=JSON.parse(r),e.prev=3,e.next=6,u.a.post(a,l);case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(3),console.log("Error lors de la validation de la reservation du trajet"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelBooking",value:function(){var e=Object(l.a)(n.a.mark((function e(t){var a,r,l,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.a+o.d,r=JSON.stringify(t),l=JSON.parse(r),e.prev=3,e.next=6,u.a.post(a,l);case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(3),console.log("Error lors de l'annulation de la reservation"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelTrip",value:function(){var e=Object(l.a)(n.a.mark((function e(t){var a,r,l,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.a+o.e,r=JSON.stringify(t),l=JSON.parse(r),e.prev=3,e.next=6,u.a.post(a,l);case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(3),console.log("Error lors de l'annulation du trajet"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readDriverTrips",value:function(){var e=Object(l.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.a+o.n+"?email="+t,e.prev=1,e.next=4,u.a.get(a);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("erreur lors de la recherche de trajet"+e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readPassengerTrips",value:function(){var e=Object(l.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.a+o.o+"?email="+t,e.prev=1,e.next=4,u.a.get(a);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("erreur lors de la recherche de trajet"+e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"searchTrips",value:function(){var e=Object(l.a)(n.a.mark((function e(t,a,r,l){var c,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.a+o.p+"?trip_from="+t+"&trip_to="+a+"&trip_date="+r+"&trip_place="+l,e.prev=1,e.next=4,u.a.get(c);case 4:return i=e.sent,e.abrupt("return",i);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("erreur lors de la recherche de trajet"+e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,r,n){return e.apply(this,arguments)}}()}]),e}();t.a=p},586:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=["Conakry","Nz\xe9r\xe9kor\xe9","Kankan","Kindia","Bok\xe9","Lyon","Paris","Kissidougou","Lab\xe9"].sort((function(e,t){return e>t?1:-1}))},748:function(e,t,a){},749:function(e,t,a){},750:function(e,t,a){},751:function(e,t,a){},831:function(e,t,a){"use strict";a.r(t);var r=a(173),n=a(167),l=a(168),c=a(172),i=a(170),o=a(169),s=a(1),u=a.n(s),p=a(171),m=a(554),d=a(555),h=a(556),v=a(842),f=a(814),E=a(835),g=a(797),_=a(570),b=a(573),j=a(571),y=a(640),O=a(641),N=a(566),S=a(830),k=a(828),C=a(586),x=(a(748),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.message,r=t.formStep,n=t.activeStep,l=t.trip_intermediate,c=t.handleChange,i=C.a;return r!==n?null:u.a.createElement(g.a,null,u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(d.a,{md:"5"},u.a.createElement("br",null),u.a.createElement(_.a,null,u.a.createElement(b.a,null,u.a.createElement("i",{className:"fa fa-align-justify"}),u.a.createElement("strong",null,"D'o\xf9 venez vous?")),u.a.createElement(j.a,null,a&&u.a.createElement("span",{className:"tripFromAlert"}," ",a," "),u.a.createElement(y.a,null,u.a.createElement(S.a,{className:"create-trip-form-from",options:i,getOptionLabel:function(e){return e},onChange:function(t,a){return e.props.childData("trip_from",a)},renderInput:function(e){return u.a.createElement(k.a,Object.assign({},e,{label:"D\xe9part",variant:"outlined"}))}}),u.a.createElement(S.a,{className:"create-trip-form-to",options:i,getOptionLabel:function(e){return e},onChange:function(t,a){return e.props.childData("trip_to",a)},renderInput:function(e){return u.a.createElement(k.a,Object.assign({},e,{label:"Arriv\xe9e",variant:"outlined"}))}}),u.a.createElement(O.a,{htmlFor:"name"},"Trajets Interm\xe9diares"),u.a.createElement(N.a,{type:"text",id:"trip_intermediate",name:"trip_intermediate",placeholder:"",className:"create-trip-form-intermediate",value:l,onChange:c})))))))}}]),a}(s.Component)),w=(a(749),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.formStep,r=e.activeStep,n=e.trip_date,l=e.trip_hour,c=e.trip_place,i=e.trip_amount,o=e.handleChange;return a!==r?null:u.a.createElement(g.a,null,u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(d.a,{md:"5"},u.a.createElement("br",null),u.a.createElement(_.a,null,u.a.createElement(b.a,null,u.a.createElement("i",{className:"fa fa-align-justify"}),u.a.createElement("strong",null,"O\xf9 allez vous?")),u.a.createElement(j.a,null,t&&u.a.createElement("span",{className:"tripDetailAlert"}," ",t," "),u.a.createElement(y.a,null,u.a.createElement(O.a,{className:"detailLabel"},"Date de d\xe9part"),u.a.createElement(N.a,{type:"date",id:"trip_date",name:"trip_date",placeholder:"",className:"trip_date",value:n,onChange:o}),u.a.createElement(O.a,{className:"detailLabel"},"Heure de d\xe9part"),u.a.createElement(N.a,{type:"time",id:"trip_hour",name:"trip_hour",value:l,className:"trip_hour",onChange:o}),u.a.createElement(O.a,{className:"detailLabel"},"Nombre de place disponible"),u.a.createElement(N.a,{type:"select",name:"trip_place",id:"trip_place",className:"trip_place",value:c,onChange:o},u.a.createElement("option",{value:"1"},"1 place"),u.a.createElement("option",{value:"2"},"2 places"),u.a.createElement("option",{value:"3"},"3 places"),u.a.createElement("option",{value:"4"},"4 places"),u.a.createElement("option",{value:"5"},"5 places"),u.a.createElement("option",{value:"6"},"6 places")),u.a.createElement(O.a,{className:"detailLabel"},"Prix par place"),u.a.createElement(N.a,{type:"text",id:"trip_amount",name:"trip_amount",value:i,className:"trip_amount",onChange:o})))))))}}]),a}(s.Component)),D=(a(750),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.formStep,r=e.activeStep,n=e.trip_comment,l=e.handleChange;return a!==r?null:u.a.createElement(g.a,null,u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(d.a,{md:"5"},u.a.createElement("br",null),u.a.createElement(_.a,null,u.a.createElement(b.a,null,u.a.createElement("i",{className:"fa fa-align-justify"}),u.a.createElement("strong",null,"Ajoutez un commentaire pour plus de pr\xe9cision")),u.a.createElement(j.a,null,u.a.createElement(y.a,null,u.a.createElement(O.a,{htmlFor:"name"},"Commentaires"),u.a.createElement(N.a,{type:"textarea",id:"trip_comment",name:"trip_comment",placeholder:"",className:"trip_comment",value:n,onChange:l}),u.a.createElement("span",{className:"trip-comment-alert"}," ",t," ")))))))}}]),a}(s.Component)),J=(a(751),a(812)),V=a(813),T=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.formStep,a=e.activeStep,r=e.cov_trip;return t!==a?null:u.a.createElement(g.a,null,u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(d.a,{sm:"12",md:"5"},u.a.createElement(_.a,null,u.a.createElement(b.a,null,u.a.createElement("i",{className:"fa fa-align-justify"}),u.a.createElement("strong",null,"Recapitulatif")),u.a.createElement(j.a,null,u.a.createElement(J.a,null,u.a.createElement(V.a,null,u.a.createElement("strong",null,"D\xe9part :")," ",r.trip_from," "),u.a.createElement(V.a,null,u.a.createElement("strong",null,"Arriv\xe9e : ")," ",r.trip_to),u.a.createElement(V.a,null,u.a.createElement("strong",null,"Points d'arr\xeat : "),r.trip_intermediate," "),u.a.createElement(V.a,null,u.a.createElement("strong",null,"Date d\xe9part : ")," ",r.trip_date),u.a.createElement(V.a,null,u.a.createElement("strong",null,"Heure d\xe9part : "),r.trip_hour," "),u.a.createElement(V.a,null,u.a.createElement("strong",null,"Nombre de place : "),r.trip_place," "),u.a.createElement(V.a,null,u.a.createElement("strong",null,"Montant : "),r.trip_amount," "))))))))}}]),a}(s.Component),I=a(567),L=a(714),H=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.save;return console.log("in tripInfos save : "+t),u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(d.a,{xs:"12",md:"4"},u.a.createElement(_.a,null,u.a.createElement(b.a,null,u.a.createElement("i",{className:"fa fa-align-justify"}),u.a.createElement("strong",null,"Cr\xe9ation de trajet"),u.a.createElement("small",null)),u.a.createElement(j.a,null,t?u.a.createElement(L.a,{color:"success"},u.a.createElement("h4",{className:"alert-heading"},"Bravo"),u.a.createElement("p",null,"Votre trajet \xe0 \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s. Vous allez recevoir un mail de confirmation."),u.a.createElement("hr",null),u.a.createElement("p",{className:"mb-0"},"Nous vous remercions pour votre confiance.")):u.a.createElement(L.a,{color:"danger"},u.a.createElement("h4",{className:"alert-heading"},"Error!"),u.a.createElement("p",null,"Une erreur s'est produite suite \xe0 votre demande de cr\xe9ation de trajet. Merci de r\xe9\xe9essayer plus tard!"),u.a.createElement("hr",null),u.a.createElement("p",{className:"mb-0"},"Erreur serveur")),u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(d.a,{xs:"3"},u.a.createElement(h.a,{onClick:function(){return e.props.goHome()},color:"primary",className:"px-4"},"OK")))))))}}]),a}(s.Component),z=function(){function e(){Object(n.a)(this,e)}return Object(l.a)(e,null,[{key:"areValidInput",value:function(e,t,a){var r=!0,n="";return e&&t?e===t?(r=!1,n="Le d\xe9part et l'arriv\xe9e doivent \xeatre diff\xe9rents"):a.length>250&&(r=!1,n="Taille du trajet interm\xe9diaire trop longue"):(r=!1,n="Veillez choisir le d\xe9part et l'arriv\xe9e du trajet"),{resultat:r,message:n,errorStep:-1}}},{key:"areValidDetailInput",value:function(e,t,a,r){var n=!0,l="";return e&&t&&a&&r||(n=!1,l="Tous les champs ci-dessous sont obligatoires"),{resultat:n,message:l,errorStep:-1}}},{key:"isValidComment",value:function(e){var t=!0,a="";return e.length>250&&(t=!1,a="Vous ne pouvez pas d\xe9passer 250 caract\xe8res"),{resultat:t,message:a,errorStep:-1}}}]),e}(),B=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={trip_driver:"",trip_from:"",trip_to:"",trip_intermediate:"",trip_date:"",trip_hour:"",trip_place:1,trip_amount:"",trip_comment:"",activeStep:0,save:!1,error:!1,errorStep:-1,message:""},r.handleChange=r.handleChange.bind(Object(c.a)(r)),r.handleNext=r.handleNext.bind(Object(c.a)(r)),r.handleBack=r.handleBack.bind(Object(c.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(c.a)(r)),r.goHome=r.goHome.bind(Object(c.a)(r)),r.childData=r.childData.bind(Object(c.a)(r)),r.steps=["Trajet","D\xe9tail","Commentaire","Validation"],r}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(r.a)({},a,n))}},{key:"handleNext",value:function(){var e=this.state,t=e.activeStep,a=e.trip_from,r=e.trip_to,n=e.trip_intermediate,l=e.trip_date,c=e.trip_hour,i=e.trip_place,o=e.trip_amount,s=e.trip_comment;if(t<this.steps.length-1){var u={};if(0===t?u=z.areValidInput(a,r,n):1===t?u=z.areValidDetailInput(l,c,i,o):2===t&&(u=z.isValidComment(s)),!1===u.resultat)return void this.setState({error:!0,message:u.message,errorStep:u.errorStep})}this.setState({error:!1,message:"",activeStep:t+1})}},{key:"handleBack",value:function(){1===this.state.activeStep&&this.setState({trip_from:"",trip_to:""}),this.setState({error:!1,activeStep:this.state.activeStep-1})}},{key:"goHome",value:function(){this.props.history.push("/")}},{key:"cov_trip",value:function(){var e=this.state,t=e.trip_from,a=e.trip_to,r=e.trip_intermediate,n=e.trip_date,l=e.trip_hour,c=e.trip_place,i=e.trip_amount,o=e.trip_comment;return{trip_driver:this.props.cov_user.cov_mail,trip_from:t,trip_to:a,trip_intermediate:r,trip_date:n,trip_hour:l,trip_max_place:c,trip_amount:i,trip_comment:o}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.cov_trip();I.a.createTrip(a).then((function(e){t.setState({save:!0}),t.handleNext()})).catch((function(e){throw e}))}},{key:"childData",value:function(e,t){this.setState(Object(r.a)({},e,t))}},{key:"render",value:function(){var e=this.steps,t=this.cov_trip(),a=this.state,r=a.activeStep,n=(a.trip_from,a.trip_to,a.trip_intermediate),l=a.trip_date,c=a.trip_hour,i=a.trip_place,o=a.trip_amount,s=a.trip_comment,p=a.message;return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12"},u.a.createElement(v.a,{activeStep:r,alternativeLabel:!0},e.map((function(e){return u.a.createElement(f.a,{key:e},u.a.createElement(E.a,null,e))}))),u.a.createElement("div",null,r===e.length?u.a.createElement(H,{save:this.state.save,goHome:this.goHome}):u.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},u.a.createElement("div",null,u.a.createElement(x,{formStep:0,activeStep:r,message:p,handleChange:this.handleChange,childData:this.childData,trip_intermediate:n}),u.a.createElement(w,{formStep:1,activeStep:r,message:p,trip_date:l,trip_hour:c,trip_place:i,trip_amount:o,handleChange:this.handleChange}),u.a.createElement(D,{formStep:2,activeStep:r,trip_comment:s,message:p,handleChange:this.handleChange}),u.a.createElement(T,{formStep:3,activeStep:r,cov_trip:t,submit:this.handleSubmit})))))),u.a.createElement(m.a,{className:"justify-content-center"},u.a.createElement(d.a,{md:"1",xs:"5"},u.a.createElement(h.a,{onClick:this.handleBack,disabled:0===r,"aria-pressed":"true",block:!0,color:"primary",className:"btn-pill"},"Pr\xe9c\xe9dent")),u.a.createElement(d.a,{md:"1",xs:"5"},u.a.createElement(h.a,{onClick:r>=e.length-1?this.handleSubmit:this.handleNext,"aria-pressed":"true",block:!0,color:"primary",className:"btn-pill"},r>=e.length-1?"Valider":"Suivant"),u.a.createElement("br",null))))}}]),a}(s.Component);t.default=Object(p.b)((function(e){return{cov_user:e.cov_user}}))(B)}}]);
//# sourceMappingURL=20.e373a15c.chunk.js.map