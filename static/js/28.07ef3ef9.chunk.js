(this.webpackJsonpcov_gn=this.webpackJsonpcov_gn||[]).push([[28],{552:function(e,t,r){"use strict";var a=r(167),n=r(168),s=r(550),c=function(){function e(){Object(a.a)(this,e)}return Object(n.a)(e,null,[{key:"info",value:function(t,r){return s.a.info(t,Object.assign(e.options,{hideAfter:r}))}},{key:"error",value:function(t,r){return s.a.error(t,Object.assign(e.options,{hideAfter:r}))}},{key:"success",value:function(t,r){return s.a.success(t,Object.assign(e.options,{hideAfter:r}))}},{key:"loading",value:function(t,r){var a=r||1;return s.a.loading(t,Object.assign(e.options,{hideAfter:a}))}},{key:"warn",value:function(t,r){return s.a.warn(t,Object.assign(e.options,{hideAfter:r}))}}]),e}();c.options={position:"top-center",hideAfter:3};t.a=c},567:function(e,t,r){"use strict";var a=r(557),n=r.n(a),s=r(558),c=r(167),i=r(168),o=r(574),u=r(579),p=r.n(u),l=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"createTrip",value:function(e){var t=o.a+o.j,r=JSON.stringify(e),a=JSON.parse(r);return p.a.post(t,a).then((function(e){return e})).catch((function(e){throw console.log("Error lors de la creation du trajet"),e}))}},{key:"updateTrip",value:function(e){var t=o.a+o.r,r=JSON.stringify(e),a=JSON.parse(r);return p.a.post(t,a).then((function(e){return e})).catch((function(e){throw console.log("Error lors de la modification du trajet"),e}))}},{key:"bookTrip",value:function(e){var t=o.a+o.c,r=JSON.stringify(e),a=JSON.parse(r);return p.a.post(t,a).then((function(e){return e})).catch((function(e){throw console.log("Error lors de la reservation du trajet"),e}))}},{key:"bookingValidation",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var r,a,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.a+o.b,a=JSON.stringify(t),s=JSON.parse(a),e.prev=3,e.next=6,p.a.post(r,s);case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(3),console.log("Error lors de la validation de la reservation du trajet"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelBooking",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var r,a,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.a+o.d,a=JSON.stringify(t),s=JSON.parse(a),e.prev=3,e.next=6,p.a.post(r,s);case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(3),console.log("Error lors de l'annulation de la reservation"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelTrip",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var r,a,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.a+o.e,a=JSON.stringify(t),s=JSON.parse(a),e.prev=3,e.next=6,p.a.post(r,s);case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(3),console.log("Error lors de l'annulation du trajet"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readDriverTrips",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.a+o.n+"?email="+t,e.prev=1,e.next=4,p.a.get(r);case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("erreur lors de la recherche de trajet"+e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readPassengerTrips",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.a+o.o+"?email="+t,e.prev=1,e.next=4,p.a.get(r);case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("erreur lors de la recherche de trajet"+e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"searchTrips",value:function(){var e=Object(s.a)(n.a.mark((function e(t,r,a,s){var c,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.a+o.p+"?trip_from="+t+"&trip_to="+r+"&trip_date="+a+"&trip_place="+s,e.prev=1,e.next=4,p.a.get(c);case 4:return i=e.sent,e.abrupt("return",i);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("erreur lors de la recherche de trajet"+e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,a,n){return e.apply(this,arguments)}}()}]),e}();t.a=l},608:function(e,t,r){"use strict";var a=r(557),n=r.n(a),s=r(558),c=r(167),i=r(168),o=r(47),u=r(567),p=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"updateLastAction",value:function(){return{type:"UPDATE_LAST_ACTION"}}},{key:"setTrips",value:function(t){return function(r){r({type:o.e,value:t}),r(e.updateLastAction())}}},{key:"setCurrentTrip",value:function(t){return function(r){r({type:o.c,value:t}),r(e.updateLastAction())}}},{key:"setTripDesiredPlace",value:function(t){return function(r){r({type:o.f,value:t}),r(e.updateLastAction())}}},{key:"searchTrips",value:function(t,r,a,c){return function(){var i=Object(s.a)(n.a.mark((function s(i){var o;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.searchTrips(t,r,a,c);case 3:o=n.sent,i(e.setTrips(o.data)),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}}),s,null,[[0,7]])})));return function(e){return i.apply(this,arguments)}}()}}]),e}();t.a=p},752:function(e,t,r){},826:function(e,t,r){"use strict";r.r(t);var a=r(173),n=r(167),s=r(168),c=r(172),i=r(170),o=r(169),u=r(1),p=r.n(u),l=(r(577),r(568)),v=r.n(l),f=(r(752),r(171)),h=r(567),d=r(554),m=r(555),b=r(556),_=r(595),k=r(552),y=r(608),g=r(753),O=r.n(g),j=r(572),E=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).state={current_trip:"",current_trip_driver:"",trip_passengers:[]},a.book=a.book.bind(Object(c.a)(a)),a.login=a.login.bind(Object(c.a)(a)),a.goBack=a.goBack.bind(Object(c.a)(a)),a}return Object(s.a)(r,[{key:"login",value:function(){this.props.history.push(j.b)}},{key:"strUpFirst",value:function(e){return(e+"").charAt(0).toUpperCase()+e.substr(1)}},{key:"bookValues",value:function(){return{trip_reference:this.state.current_trip.reference,trip_passenger:this.props.cov_user.cov_mail,trip_place:this.props.cov_trip_placeDesired}}},{key:"book",value:function(e){var t=this,r=this.bookValues();h.a.bookTrip(r).then((function(e){t.props.history.push(j.r)})).catch((function(e){throw k.a.error("Erreur technique: veuillez r\xe9\xe9ssayer plus tard",2),e}))}},{key:"goBack",value:function(){this.props.history.goBack()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.trip_reference;if(t){this.props.cov_trips.filter((function(e){return e.reference===t})).map((function(t){e.setState({current_trip:t,current_trip_driver:t.driver,trip_passengers:t.passenger}),e.props.dispatch(y.a.setCurrentTrip(t))}))}else{var r=this.props.cov_current_trip;this.setState({current_trip:r,current_trip_driver:r.driver})}}},{key:"render",value:function(){var e,t=v()(this.state.current_trip.startDate,"YYY-MM-DD"),r=this.strUpFirst(t.format("ddd DD MMM"));return p.a.createElement("div",{className:"trip-body container"},p.a.createElement(d.a,{className:"show-trip-detail-header"},p.a.createElement(m.a,{className:"col-2 col-sm-4"},p.a.createElement(O.a,{className:"trip-back",onClick:this.goBack})),p.a.createElement(m.a,{className:"trip-date col-10 col-sm-6"},p.a.createElement("h1",null," ",r," "))),p.a.createElement(d.a,{className:"trip-from"},"Depart : ",this.state.current_trip.startCity),p.a.createElement(d.a,{className:"trip-interval"}," "),p.a.createElement(d.a,{className:"trip-to"},"Arriv\xe9e: ",this.state.current_trip.endCity),p.a.createElement(d.a,{className:"trip-space"}," "),p.a.createElement(d.a,{className:"trip-price"},p.a.createElement(m.a,null," Prix total pour un passager "),p.a.createElement(m.a,{className:"trip-price-value"}," ",this.state.current_trip.price," GNF")),p.a.createElement(d.a,{className:"trip-space"}," "),p.a.createElement(d.a,{className:"trip-driver"},p.a.createElement(m.a,{className:"col-2"},p.a.createElement(_.a,{className:"trip-driver-picture",src:this.state.current_trip_driver.picture})),p.a.createElement(m.a,{className:"col-8"},p.a.createElement("span",{className:"trip-driver-name"},this.state.current_trip_driver.fname+" "+this.state.current_trip_driver.lname)," ",p.a.createElement("br",null),p.a.createElement("span",{className:"trip-driver-info"},"Membre depuis ",p.a.createElement("br",null),v()(this.state.current_trip_driver.registerDate,"dd/MM/yyy HH:mm:ss").format("d/MM/yyy")))),p.a.createElement(d.a,{className:"trip-driver-description"},this.state.current_trip.description),p.a.createElement(d.a,{className:"trip-space"}," "),p.a.createElement(d.a,{className:"trip-passengers-title"}," Liste des passagers du trajet"),p.a.createElement(d.a,{className:"trip-passenger"},this.state.trip_passengers.map((function(e,t){return p.a.createElement(m.a,{key:t},p.a.createElement(_.a,{className:"trip-passenger-picture",src:e.user.picture}),p.a.createElement("span",{className:"trip-passenger-name"},e.user.fname+" "+e.user.lname)," ",p.a.createElement("br",null))}))),p.a.createElement(d.a,{className:"trip-next"},p.a.createElement(b.a,(e={className:"show_trip_detail_forme_btn",onClick:this.book},Object(a.a)(e,"onClick",!0===this.props.auth.logged?this.book:this.login),Object(a.a)(e,"aria-pressed","true"),Object(a.a)(e,"block",!0),Object(a.a)(e,"color",!0===this.props.auth.logged?"success":"primary"),e),!0===this.props.auth.logged?"Reserver":"Se connecter")))}}]),r}(p.a.Component);t.default=Object(f.b)((function(e){return{auth:e.auth,cov_user:e.cov_user,cov_current_trip:e.cov_current_trip,cov_trips:e.cov_trips,cov_trip_placeDesired:e.cov_trip_placeDesired}}))(E)}}]);
//# sourceMappingURL=28.07ef3ef9.chunk.js.map